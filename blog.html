<!doctype html>
<html>
  <title>Blog</title>
  <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
  <script>
    function defer(func, str, args) {
      if (!eval('false||'+str)) {
        setTimeout(function() {defer(func, str, args)}, 4);
      } else func(args);
    }
    
    var done = false, count = 0;
    $.get('details', function(data) {
      var post = JSON.parse(data);
      $('body').html(
        `<hr>
         <article>
           <h1>`+post.title+`</h1>
           <main id="main`+count+`">
             <script async>
               var content = "";
               $.get("`+post.url+`", function (data) {
                 content = data;
               });
               defer(function (args) {
                 document.getElementById('main'+args[0]).innerHTML = content;
               }, "content", ["`+(count++)+`"]);
             </sc`+`ript>
           </main>
         </article>`+$(`body`).html());
      done = true;
    });
  </script>
  <body>
  </body>
</html>

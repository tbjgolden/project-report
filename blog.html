<!doctype html>
<html>
  <title>Blog</title>
  <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
  <script>
    function defer(func, str, args) {
      if (!eval('false||'+str)) {
        setTimeout(function() {defer(func, str, args)}, 4);
      } else func(args);
    }
    
    var done = false;
    $.get('details', function(data) {
      var post = JSON.parse(data);
      $('body').html(
        `<hr>
         <article>
           <h1>`+post.title+`</h1>
           <main>
             <script async>
               var content = "";
               $.get("`+post.url+`", function (data) {
                 content = data;
               });
               defer(function (args) {
                 console.log(args[0]);
                 console.log(content);
               }, "content", [eval("this.parentNode")]);
             </sc`+`ript>
           </main>
         </article>`+$(`body`).html());
      done = true;
    });
  </script>
  <body>
  </body>
</html>

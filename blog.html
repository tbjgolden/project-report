<!doctype html>
<html>
  <title>Blog</title>
  <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
  <script>
    function defer(func, str) {
      if (!eval(str)) {
        setTimeout(function() {defer(func, str)}, 4);
      } else func();
    }
    
    var done = false;
    $.get('details', function(data) {
      var post = JSON.parse(data);
      $('body').html('<hr><h1>'+post.title+'</h1><h2>'+post.url+'</h2>'+$('body').html());
      stillgoing = true;
    });
    
    defer(
      function() {
        $('body').html($('body').html()+'<hr>');
      },
    'stillgoing');
  </script>
  <body>
  </body>
</html>
